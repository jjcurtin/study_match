{
  "hash": "9614a7c0c67c439adbf89fe72c88820f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Fits and characterizes final model for 4-week outcome\"\nauthor: \"Gaylen Fronk\"\ndate: \"2024-05-22\"\noutput: \n  html_document:\n    toc: true \n    toc_depth: 4\nparams:\n  study: \"match\"\n  version: \"v5\"\n  cv: \"kfold\"\n  y_col_name: \"pp_hybrid_wk4_outcome\" \nformat:\n  html:\n    embed-resources: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n### Set Up Environment\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nstudy <- params$study\nversion <- params$version\ncv <- params$cv\ny_col_name <- params$y_col_name\n```\n:::\n\n\nPackages for script\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\nlibrary(tidymodels)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n✔ broom        1.0.5      ✔ recipes      1.0.10\n✔ dials        1.2.1      ✔ rsample      1.2.1 \n✔ dplyr        1.1.4      ✔ tibble       3.2.1 \n✔ ggplot2      3.5.1      ✔ tidyr        1.3.1 \n✔ infer        1.0.7      ✔ tune         1.2.1 \n✔ modeldata    1.3.0      ✔ workflows    1.1.4 \n✔ parsnip      1.2.1      ✔ workflowsets 1.1.0 \n✔ purrr        1.0.2      ✔ yardstick    1.3.1 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ purrr::discard() masks scales::discard()\n✖ dplyr::filter()  masks stats::filter()\n✖ dplyr::lag()     masks stats::lag()\n✖ recipes::step()  masks stats::step()\n• Use tidymodels_prefer() to resolve common conflicts.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.0     ✔ readr     2.1.5\n✔ lubridate 1.9.3     ✔ stringr   1.5.1\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ readr::col_factor() masks scales::col_factor()\n✖ purrr::discard()    masks scales::discard()\n✖ dplyr::filter()     masks stats::filter()\n✖ stringr::fixed()    masks recipes::fixed()\n✖ dplyr::lag()        masks stats::lag()\n✖ readr::spec()       masks yardstick::spec()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\nlibrary(Matrix)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'Matrix'\n\nThe following objects are masked from 'package:tidyr':\n\n    expand, pack, unpack\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\nlibrary(probably)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'probably'\n\nThe following objects are masked from 'package:base':\n\n    as.factor, as.ordered\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\nlibrary(here)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nhere() starts at C:/Users/gfronk/Documents/GitHub/study_match\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\ndevtools::source_url(\"https://github.com/jjcurtin/lab_support/blob/main/fun_eda.R?raw=true\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nℹ SHA-1 hash of file is \"c045eee2655a18dc85e715b78182f176327358a7\"\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\ndevtools::source_url(\"https://github.com/jjcurtin/lab_support/blob/main/chtc/static_files/fun_chtc.R?raw=true\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nℹ SHA-1 hash of file is \"b58b9e0adc05e89609ee8bc6f20c39375b262fe6\"\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\ntheme_set(theme_classic()) \n```\n:::\n\n\nHandle conflicts\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#| message: false\n#| warning: false\n\noptions(conflicts.policy = \"depends.ok\")\n```\n:::\n\n\nAbsolute paths\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nswitch (Sys.info()[['sysname']],\n        # PC paths\n        Windows = {\n          path_input <- stringr::str_c(\"P:/studydata/match/chtc/\", \n                                       y_col_name)\n          path_models <- stringr::str_c(\"P:/studydata/match/models/\", \n                                        y_col_name)},\n        \n        # IOS paths\n        Darwin = {\n          path_input <- stringr::str_c(\"/Volumes/private/studydata/match/chtc/\", \n                                       y_col_name)\n          path_models <- stringr::str_c(\"/Volumes/private/studydata/match/models/\", \n                                        y_col_name)},\n        \n        # Linux paths\n        Linux = {\n          path_input <- stringr::str_c(\"~/mnt/private/studydata/match/chtc/\", \n                                       y_col_name)\n          path_models <- stringr::str_c(\"~/mnt/private/studydata/match/models/\", \n                                        y_col_name)}\n)\n```\n:::\n\n\nChunk Defaults\n\n\n::: {.cell .hidden}\n\n```{.r .cell-code .hidden}\n#| include: false\n\nknitr::opts_chunk$set(attr.output='style=\"max-height: 500px;\"')\n\noptions(tibble.width = Inf)\noptions(tibble.print_max = Inf)\n```\n:::\n\n\n### Read in best configuration\n\nSelected in 1_metrics_inner (k-fold CV)\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbest_config <- read_csv(file.path(path_models, \n                                  str_c(\"best_config_\", version, \".csv\")),\n                        show_col_types = FALSE)\n\nglimpse(best_config)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\nRows: 1\nColumns: 14\n$ n_jobs       <dbl> 10\n$ algorithm    <chr> \"glmnet\"\n$ feature_set  <chr> \"item_ordinal\"\n$ hp1          <dbl> 0.1\n$ hp2          <dbl> 0.1326421\n$ hp3          <lgl> NA\n$ resample     <chr> \"up_1\"\n$ accuracy     <dbl> 0.6651376\n$ bal_accuracy <dbl> 0.6535065\n$ roc_auc      <dbl> 0.7358708\n$ sens         <dbl> 0.6524493\n$ spec         <dbl> 0.6377969\n$ ppv          <dbl> 0.4682609\n$ npv          <dbl> 0.7860704\n```\n\n\n:::\n:::\n\n\n### Fit best model in full dataset\n\n**NOTE**: This model will only be used for 1) examining parameter estimates, and 2) ultimate dissemination.\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbatch_names <- list.dirs(path_input, full.names = FALSE, recursive = FALSE) \n\nbatch_name <- batch_names[str_detect(batch_names, \"train\") & \n                            str_detect(batch_names, cv) &\n                            str_detect(batch_names, version) &\n                            str_detect(batch_names, best_config$algorithm)] \n\npath_batch <- file.path(path_input, batch_name)\nsource(file.path(path_batch, \"input\", \"training_controls.R\"))\n\nd <- read_csv(file.path(path_batch, \"input\", \"data_trn.csv\"), \n              show_col_types = FALSE) \n\nd_outcomes <- d |> \n  select(subid, ends_with(\"outcome\") & contains(\"hybrid\"))\n\nd <- format_data(d) \n\nrec <- build_recipe(d = d, config = best_config)\n\nrec_prepped_full <- rec |> \n  prep(training = d, strings_as_factors = FALSE)\n\nfeat_all <- rec_prepped_full |> \n  bake(new_data = d)\n\nmodel_best <- fit_best_model(best_model = best_config, \n                             feat = feat_all, \n                             ml_mode = \"classification\")\n```\n:::\n\n\n### Model coefficients\n\n**NOTE**: Coefficients are naturally inverted (i.e., positive class [abstinence] treated as first [vs. second] class). Here, we multiply coefficients by -1 to align the direction of coefficients with the rest of our analyses. Once flipped (i.e., as they appear below)...\n\nA *positive coefficient* indicates that increases in the feature *increase* the likelihood of abstinence. For example, increases in motivation to quit (\"motive_quit_order\") *increase* the likelihood of abstinence.\n\nA *negative coefficient* indicates that increases in the feature *decrease* the likelihood of smoking. For example, increases in carbon monoxide (\"co\") *decrease* the likelihood of abstinence.\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nmodel_tidy <- tidy(model_best)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nLoaded glmnet 4.1-8\n```\n\n\n:::\n:::\n\n::: {#tbl-retained-vars-4wk .cell}\n\n```{.r .cell-code .hidden}\n#| label: tbl-retained-vars-4wk\nretained_vars <- model_tidy |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  select(-penalty) |> \n  arrange(desc(abs(estimate)))\n\nprint_kbl(retained_vars, digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -0.7350 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> co </td>\n   <td style=\"text-align:right;\"> -0.1665 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.1228 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0960 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> motive_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0951 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0929 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0832 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0770 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> longest_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0756 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0694 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0644 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_weekend_order </td>\n   <td style=\"text-align:right;\"> -0.0610 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0607 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0601 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0599 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0585 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> income_order </td>\n   <td style=\"text-align:right;\"> 0.0576 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0516 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0429 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0428 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0422 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0418 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_5_item_order </td>\n   <td style=\"text-align:right;\"> -0.0405 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0403 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> important_to_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0394 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0369 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0358 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0355 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0341 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0319 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0318 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0310 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0310 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0306 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0297 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0287 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0286 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0284 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0276 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0273 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0269 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0247 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0241 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0237 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0235 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0230 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0227 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0220 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_tense </td>\n   <td style=\"text-align:right;\"> -0.0216 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0209 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0208 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_order </td>\n   <td style=\"text-align:right;\"> -0.0202 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0199 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0195 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0195 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0192 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> quit_success_30d_order </td>\n   <td style=\"text-align:right;\"> 0.0189 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_14_item_order </td>\n   <td style=\"text-align:right;\"> -0.0186 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0184 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0182 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0181 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0180 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0180 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0178 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0161 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_20_item_order </td>\n   <td style=\"text-align:right;\"> -0.0159 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0156 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_angry_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0151 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_no_smoking_allowed </td>\n   <td style=\"text-align:right;\"> -0.0147 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0146 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_pain </td>\n   <td style=\"text-align:right;\"> -0.0143 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_stressed_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0139 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_15_item_order </td>\n   <td style=\"text-align:right;\"> -0.0135 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_14_item_order </td>\n   <td style=\"text-align:right;\"> 0.0125 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0119 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0105 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0103 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0101 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> phq9_6_item_order </td>\n   <td style=\"text-align:right;\"> -0.0097 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_no </td>\n   <td style=\"text-align:right;\"> -0.0083 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0082 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0082 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0078 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0070 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0063 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_mfi_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0061 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_1_item_order </td>\n   <td style=\"text-align:right;\"> 0.0060 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_3_item_order </td>\n   <td style=\"text-align:right;\"> 0.0058 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_crave_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0057 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0056 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0055 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0049 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_4_item_order </td>\n   <td style=\"text-align:right;\"> -0.0049 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0041 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_yes </td>\n   <td style=\"text-align:right;\"> 0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0033 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0032 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0031 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0030 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_no </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_coughing_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0026 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_marital_status_ehr_never_married </td>\n   <td style=\"text-align:right;\"> 0.0019 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_e_cig_tried </td>\n   <td style=\"text-align:right;\"> 0.0017 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0013 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0009 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_pipe_tried </td>\n   <td style=\"text-align:right;\"> -0.0007 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_ftnd_2_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hrqol_4 </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_do_not_work_outside_home </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n10.91% of features were retained by the glmnet solution (128 features of a total considered 1173 features).\n\n\n::: {#tbl-retained-tx-4wk .cell}\n\n```{.r .cell-code .hidden}\n#| label: tbl-retained-tx-4wk\nretained_vars_tx <- retained_vars |> \n  filter(str_detect(term, \"treatment_\")) |> \n  arrange(desc(abs(estimate))) \n\nprint_kbl(retained_vars_tx, digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0960 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0644 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0601 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0516 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0428 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0355 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0341 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0310 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0306 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0284 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0273 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0247 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0241 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0237 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0230 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0227 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0220 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0209 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0208 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0199 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0192 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0184 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0182 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0178 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0156 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_no_smoking_allowed </td>\n   <td style=\"text-align:right;\"> -0.0147 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0146 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0105 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0101 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0082 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0078 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0063 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_mfi_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0061 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0055 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0049 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_yes </td>\n   <td style=\"text-align:right;\"> 0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0033 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0032 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0030 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_no </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_marital_status_ehr_never_married </td>\n   <td style=\"text-align:right;\"> 0.0019 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0013 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_pipe_tried </td>\n   <td style=\"text-align:right;\"> -0.0007 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_ftnd_2_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_do_not_work_outside_home </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n43.75% of the retained features were treatment interaction features (56 treatment features of 128 retained features). Of the 879 available treatment interaction features, 6% were retained.\n\n### Calculate and calibrate probabilities\n\nMake triplicate dataset\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nd_patch <- d |> \n  mutate(treatment = \"patch\") \n\nd_combo <- d |> \n  mutate(treatment = \"combo_nrt\")\n\nd_varen <- d |> \n  mutate(treatment = \"varenicline\")\n\nd_trip <- bind_rows(d_patch, d_combo) |> \n  bind_rows(d_varen) |> \n  mutate(treatment = factor(treatment, \n                            levels = c(\n                              \"patch\",\n                              \"varenicline\",\n                              \"combo_nrt\")))\n```\n:::\n\n\nMake function to: 1) hold out each sub once, 2) fit model with remaining 1085 subs, 3) get 3 raw predictions for held-out sub, 4) get calibrated predictions for held-out sub\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nget_triple_probs <- function(i_sub, best_config, d, d_trip){\n  \n  # hold out single subject\n  d_out <- d_trip |> \n    filter(subid == i_sub)\n  \n  d_in <- d |> \n    filter(subid != i_sub)\n  \n  # prep recipe \n  rec <- build_recipe(d = d_in, config = best_config)\n  rec_prepped <- rec |> \n    prep(training = d_in, strings_as_factors = FALSE)\n  \n  # bake feat_in and feat_out\n  feat_in <- rec_prepped |> \n    bake(new_data = NULL)\n  \n  feat_out <- rec_prepped |> \n    bake(new_data = d_out)\n  \n  # fit model\n  model_best <- fit_best_model(best_config, feat = feat_in,\n                               \"classification\")\n  \n  # raw (uncalibrated) predictions\n  preds_prob <- predict(model_best, feat_out,\n                        type = \"prob\")\n  \n  # fit calibration model\n  set.seed(2468)\n  cal_split <- d_in |> \n    initial_split(prop = 3/4, strata = y)\n  d_cal_in <- training(cal_split) \n  d_cal_out <- testing(cal_split)\n  \n  rec_cal_prepped <- rec |> \n    prep(training = d_cal_in, strings_as_factors = FALSE)\n  \n  feat_cal_in <- rec_cal_prepped |> \n    bake(new_data = NULL) \n  \n  feat_cal_out <- rec_cal_prepped |> \n    bake(new_data = d_cal_out) \n  \n  model_cal <- fit_best_model(best_config, feat = feat_cal_in, \"classification\")\n  \n  # beta calibration\n  beta <- predict(model_cal, feat_cal_out,\n                  type = \"prob\") |>\n    mutate(truth = feat_cal_out$y) |>\n    cal_estimate_beta(truth = truth,\n                      estimate = dplyr::starts_with(\".pred_\"),\n                      smooth = TRUE)\n  preds_prob_beta <- preds_prob |>\n    cal_apply(beta)\n  \n  # iso calibration\n  iso <- predict(model_cal, feat_cal_out,\n                 type = \"prob\") |>\n    mutate(truth = feat_cal_out$y) |>\n    cal_estimate_isotonic(truth = truth,\n                          estimate = dplyr::starts_with(\".pred_\"))\n  preds_prob_iso <- preds_prob |>\n    cal_apply(iso)\n  \n  # logistic calibration\n  logi <- predict(model_cal, feat_cal_out,\n                  type = \"prob\") |>\n    mutate(truth = feat_cal_out$y) |>\n    cal_estimate_logistic(truth = truth,\n                          estimate = dplyr::starts_with(\".pred_\"),\n                          smooth = TRUE)\n  preds_prob_logi <- preds_prob |>\n    cal_apply(logi)\n  \n  # combine raw and calibrated probs\n  probs <- tibble(subid = d_out$subid,\n                  tx = d_out$treatment,\n                  prob_raw = preds_prob[[str_c(\".pred_\", y_level_pos)]],\n                  prob_beta = preds_prob_beta[[str_c(\".pred_\", y_level_pos)]],\n                  prob_iso = preds_prob_iso[[str_c(\".pred_\", y_level_pos)]],\n                  prob_logi = preds_prob_logi[[str_c(\".pred_\", y_level_pos)]]) \n}\n```\n:::\n\n\nMap over participants so that each is held-out once\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nif(file.exists(file.path(path_models, \n                         str_c(\"trip_probs_\", version, \".csv\")))) {\n  all_probs <- read_csv(file.path(path_models, \n                                  str_c(\"trip_probs_\", version, \".csv\")),\n                        show_col_types = FALSE)\n} else {\n  all_probs <- d$subid |> \n  map(\\(i_sub) get_triple_probs(i_sub, best_config, d, d_trip)) |> \n  list_rbind()\n  \n  all_probs |> \n    write_csv(file.path(path_models, \n                        str_c(\"trip_probs_\", version, \".csv\")))\n}\n```\n:::\n\n\n## FIGURE OUT WHAT IS GOING ON\n\nMake predictions for subid 20010\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# make d_out\nd_20010 <- d_trip |> \n  filter(subid == 20010)\n\n# from model fit on full dataset\nfeat_out_full <- rec_prepped_full |> \n  bake(new_data = d_20010)\n\npreds_full <- predict(model_best, feat_out_full,\n                      type = \"prob\") |> \n  mutate(tx = d_20010$treatment,\n         model = \"full\") |> \n  select(model, tx, prob_raw = `.pred_abstinent`)\n\n# from manual model n = 1085\nd_in <- d |> \n  filter(subid != 20010)\n\nrec_manual <- build_recipe(d_in, config = best_config)\n\nrec_prepped_manual <- rec_manual |> \n  prep(training = d_in, strings_as_factors = FALSE)\n\nfeat_in <- rec_prepped_manual |> \n  bake(new_data = NULL)\n\nfeat_out_manual <- rec_prepped_manual |> \n  bake(new_data = d_20010)\n\nmodel_manual_20010 <- fit_best_model(best_config, feat = feat_in, \n                               ml_mode = \"classification\")\n\npreds_manual <- predict(model_manual_20010, feat_out_manual,\n                        type = \"prob\") |> \n  mutate(tx = d_20010$treatment,\n         model = \"manual\") |> \n  select(model, tx, prob_raw = `.pred_abstinent`)\n\n# from loop n = 1085\npreds_loop <- get_triple_probs(20010, best_config, d, d_trip) |> \n  select(tx, prob_raw) |> \n  mutate(model = \"loop\")\n  \npreds_20010 <- full_join(preds_full, preds_manual, \n                         by = c(\"model\", \"tx\", \"prob_raw\")) |> \n  full_join(preds_loop, by = c(\"model\", \"tx\", \"prob_raw\"))\n\npreds_20010\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 9 × 3\n  model  tx          prob_raw\n  <chr>  <fct>          <dbl>\n1 full   patch          0.201\n2 full   combo_nrt      0.185\n3 full   varenicline    0.265\n4 manual patch          0.362\n5 manual combo_nrt      0.307\n6 manual varenicline    0.461\n7 loop   patch          0.362\n8 loop   combo_nrt      0.307\n9 loop   varenicline    0.461\n```\n\n\n:::\n:::\n\nLoop & manual model produce same predictions. Very different from full model predictions (though would choose the same best treatment).\n\nLook at parameter estimates\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# full model\nmodel_tidy |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 128\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nmodel_tidy |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  select(-penalty) |> \n  arrange(desc(abs(estimate))) |> \n  print_kbl(digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -0.7350 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> co </td>\n   <td style=\"text-align:right;\"> -0.1665 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.1228 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0960 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> motive_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0951 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0929 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0832 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0770 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> longest_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0756 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0694 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0667 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0644 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_weekend_order </td>\n   <td style=\"text-align:right;\"> -0.0610 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0607 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0601 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0599 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0585 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> income_order </td>\n   <td style=\"text-align:right;\"> 0.0576 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0516 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0429 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0428 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0422 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0418 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_5_item_order </td>\n   <td style=\"text-align:right;\"> -0.0405 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0403 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> important_to_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0394 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0369 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0358 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0355 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0341 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0319 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0318 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0310 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0310 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0306 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0297 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0287 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0286 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0284 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0276 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0273 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0269 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0247 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0241 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0237 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0235 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0230 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0227 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0220 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_tense </td>\n   <td style=\"text-align:right;\"> -0.0216 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0209 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0208 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_order </td>\n   <td style=\"text-align:right;\"> -0.0202 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0199 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0195 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0195 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0192 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> quit_success_30d_order </td>\n   <td style=\"text-align:right;\"> 0.0189 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_14_item_order </td>\n   <td style=\"text-align:right;\"> -0.0186 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0184 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0182 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0181 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0180 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0180 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0178 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0161 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_20_item_order </td>\n   <td style=\"text-align:right;\"> -0.0159 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0156 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_angry_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0151 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_no_smoking_allowed </td>\n   <td style=\"text-align:right;\"> -0.0147 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0146 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_pain </td>\n   <td style=\"text-align:right;\"> -0.0143 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_stressed_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0139 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_15_item_order </td>\n   <td style=\"text-align:right;\"> -0.0135 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_14_item_order </td>\n   <td style=\"text-align:right;\"> 0.0125 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0119 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0105 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0103 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0101 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> phq9_6_item_order </td>\n   <td style=\"text-align:right;\"> -0.0097 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_no </td>\n   <td style=\"text-align:right;\"> -0.0083 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0082 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0082 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0078 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0070 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0063 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_mfi_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0061 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_1_item_order </td>\n   <td style=\"text-align:right;\"> 0.0060 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_3_item_order </td>\n   <td style=\"text-align:right;\"> 0.0058 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_crave_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0057 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0056 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0055 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0049 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_4_item_order </td>\n   <td style=\"text-align:right;\"> -0.0049 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0041 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_yes </td>\n   <td style=\"text-align:right;\"> 0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0033 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0032 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0031 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0030 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_no </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_coughing_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0026 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_marital_status_ehr_never_married </td>\n   <td style=\"text-align:right;\"> 0.0019 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_e_cig_tried </td>\n   <td style=\"text-align:right;\"> 0.0017 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0013 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0009 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_pipe_tried </td>\n   <td style=\"text-align:right;\"> -0.0007 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_ftnd_2_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hrqol_4 </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_do_not_work_outside_home </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n\n```{.r .cell-code .hidden}\n# manual model\nmodel_manual_20010 |> \n  tidy() |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 179\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nmodel_manual_20010 |> \n  tidy() |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  select(-penalty) |> \n  arrange(desc(abs(estimate))) |> \n  print_kbl(digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -0.1866 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> co </td>\n   <td style=\"text-align:right;\"> -0.1844 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.1369 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.1252 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.1230 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0975 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> motive_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0965 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0876 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0846 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0824 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> longest_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0724 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_weekend_order </td>\n   <td style=\"text-align:right;\"> -0.0717 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0711 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0698 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0658 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0654 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0652 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0645 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0638 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0638 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0601 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0578 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0561 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0542 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0468 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> quit_success_30d_order </td>\n   <td style=\"text-align:right;\"> 0.0451 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0448 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0443 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0431 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_9_item_no </td>\n   <td style=\"text-align:right;\"> 0.0430 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0428 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0424 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0405 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0403 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0399 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0393 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0388 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0383 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0375 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0368 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> alc_qty_order </td>\n   <td style=\"text-align:right;\"> 0.0364 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> income_order </td>\n   <td style=\"text-align:right;\"> 0.0356 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> important_to_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0349 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0324 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0320 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_no </td>\n   <td style=\"text-align:right;\"> -0.0320 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0316 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0313 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_27_item_order </td>\n   <td style=\"text-align:right;\"> 0.0308 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0299 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0291 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0290 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0289 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0289 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0281 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0280 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_pain </td>\n   <td style=\"text-align:right;\"> -0.0266 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_4_item_order </td>\n   <td style=\"text-align:right;\"> 0.0247 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0241 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0232 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_bothered_generally_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0230 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_chew_or_snuff_tried </td>\n   <td style=\"text-align:right;\"> -0.0228 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0223 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0223 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0219 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_1_item_order </td>\n   <td style=\"text-align:right;\"> 0.0214 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0213 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> -0.0211 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_4_item_order </td>\n   <td style=\"text-align:right;\"> -0.0210 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0209 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_hdsm_tense </td>\n   <td style=\"text-align:right;\"> -0.0206 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0203 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0199 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> cigs_per_day_heaviest </td>\n   <td style=\"text-align:right;\"> -0.0194 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_29_item_order </td>\n   <td style=\"text-align:right;\"> -0.0190 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_bothered_generally_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0189 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0179 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0179 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_20_item_order </td>\n   <td style=\"text-align:right;\"> -0.0178 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0170 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0159 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0159 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_14_item_order </td>\n   <td style=\"text-align:right;\"> -0.0158 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_3_item_order </td>\n   <td style=\"text-align:right;\"> 0.0157 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_coughing_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0156 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0156 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0155 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0147 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0146 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0142 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0142 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_none_yes </td>\n   <td style=\"text-align:right;\"> -0.0140 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_income_order </td>\n   <td style=\"text-align:right;\"> -0.0139 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0137 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_berlin_9_no </td>\n   <td style=\"text-align:right;\"> -0.0135 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0127 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_zyban_yes </td>\n   <td style=\"text-align:right;\"> 0.0124 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0124 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0118 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_7_item_order </td>\n   <td style=\"text-align:right;\"> 0.0115 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0115 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_14_item_order </td>\n   <td style=\"text-align:right;\"> 0.0114 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> confident_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0111 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0109 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0105 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_tired </td>\n   <td style=\"text-align:right;\"> -0.0104 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0104 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0102 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0102 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0099 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dts_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0093 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0090 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0089 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> phq9_6_item_order </td>\n   <td style=\"text-align:right;\"> -0.0089 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0086 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0082 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> panas_enthusiastic_item_order </td>\n   <td style=\"text-align:right;\"> -0.0081 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0074 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0073 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_no </td>\n   <td style=\"text-align:right;\"> -0.0072 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0070 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> bmi_ehr </td>\n   <td style=\"text-align:right;\"> 0.0067 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0065 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_6_order </td>\n   <td style=\"text-align:right;\"> -0.0056 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_partner_yes </td>\n   <td style=\"text-align:right;\"> -0.0050 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_panas_distressed_item_order </td>\n   <td style=\"text-align:right;\"> -0.0049 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_tried </td>\n   <td style=\"text-align:right;\"> -0.0049 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_asi3_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0048 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0048 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0045 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0041 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_order </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_4_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0030 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_e_cig_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0026 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0026 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0025 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0025 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> gender_ehr_male </td>\n   <td style=\"text-align:right;\"> 0.0025 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0025 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0025 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_employment_unemployed </td>\n   <td style=\"text-align:right;\"> -0.0024 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_8_item_order </td>\n   <td style=\"text-align:right;\"> -0.0021 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0021 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> alc_freq_order </td>\n   <td style=\"text-align:right;\"> 0.0019 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0018 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0018 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0017 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_28_item_order </td>\n   <td style=\"text-align:right;\"> 0.0014 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0013 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_15_item_order </td>\n   <td style=\"text-align:right;\"> -0.0012 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0011 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> age_daily_smoker </td>\n   <td style=\"text-align:right;\"> 0.0011 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_31_item_order </td>\n   <td style=\"text-align:right;\"> 0.0008 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_5_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_5_item_no </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_28_item_order </td>\n   <td style=\"text-align:right;\"> 0.0005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0004 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wsws_21_item_order </td>\n   <td style=\"text-align:right;\"> -0.0004 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_17_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_last_rct_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_20_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_cant_calm_down_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> employment_employed_full_time </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hrqol_4 </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_18_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_dizziness_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_18_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_27_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\nThese two models retain very different numbers of features. Intercept and top feature parameter estimates are quite different. General same top features (though slightly different order).\n\nMake predictions for subid 40102\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# make d_out\nd_40102 <- d_trip |> \n  filter(subid == 40102)\n\n# from model fit on full dataset\nfeat_out_full <- rec_prepped_full |> \n  bake(new_data = d_40102)\n\npreds_full <- predict(model_best, feat_out_full,\n                      type = \"prob\") |> \n  mutate(tx = d_40102$treatment,\n         model = \"full\") |> \n  select(model, tx, prob_raw = `.pred_abstinent`)\n\n# from manual model n = 1085\nd_in <- d |> \n  filter(subid != 40102)\n\nrec_manual <- build_recipe(d_in, config = best_config)\n\nrec_prepped_manual <- rec_manual |> \n  prep(training = d_in, strings_as_factors = FALSE)\n\nfeat_in <- rec_prepped_manual |> \n  bake(new_data = NULL)\n\nfeat_out_manual <- rec_prepped_manual |> \n  bake(new_data = d_40102)\n\nmodel_manual_40102 <- fit_best_model(best_config, feat = feat_in, \n                               ml_mode = \"classification\")\n\npreds_manual <- predict(model_manual_40102, feat_out_manual,\n                        type = \"prob\") |> \n  mutate(tx = d_40102$treatment,\n         model = \"manual\") |> \n  select(model, tx, prob_raw = `.pred_abstinent`)\n\n# from loop n = 1085\npreds_loop <- get_triple_probs(40102, best_config, d, d_trip) |> \n  select(tx, prob_raw) |> \n  mutate(model = \"loop\")\n  \npreds_40102 <- full_join(preds_full, preds_manual, \n                         by = c(\"model\", \"tx\", \"prob_raw\")) |> \n  full_join(preds_loop, by = c(\"model\", \"tx\", \"prob_raw\"))\n\npreds_40102\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 9 × 3\n  model  tx          prob_raw\n  <chr>  <fct>          <dbl>\n1 full   patch          0.328\n2 full   combo_nrt      0.336\n3 full   varenicline    0.324\n4 manual patch          0.510\n5 manual combo_nrt      0.526\n6 manual varenicline    0.488\n7 loop   patch          0.510\n8 loop   combo_nrt      0.526\n9 loop   varenicline    0.488\n```\n\n\n:::\n:::\n\nLoop & manual model produce same predictions. Predictions made with full model are very different - though would choose the same best treatment.\n\nLook at parameter estimates\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# full model\nmodel_tidy |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 128\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nmodel_tidy |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  #select(-penalty) |> \n  arrange(desc(abs(estimate))) |> \n  print_kbl(digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> penalty </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -0.7350 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> co </td>\n   <td style=\"text-align:right;\"> -0.1665 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.1228 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0960 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> motive_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0951 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0929 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0832 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0770 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> longest_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0756 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0694 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0667 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0644 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_weekend_order </td>\n   <td style=\"text-align:right;\"> -0.0610 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0607 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0601 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0599 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0585 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> income_order </td>\n   <td style=\"text-align:right;\"> 0.0576 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0516 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0429 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0428 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0422 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0418 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_5_item_order </td>\n   <td style=\"text-align:right;\"> -0.0405 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0403 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> important_to_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0394 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0369 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0358 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0355 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0341 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0319 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0318 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0310 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0310 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0306 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0297 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0287 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0286 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0284 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0276 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0273 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0269 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0247 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0241 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0237 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0235 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0230 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0227 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0220 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_tense </td>\n   <td style=\"text-align:right;\"> -0.0216 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0209 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0208 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_order </td>\n   <td style=\"text-align:right;\"> -0.0202 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0199 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0198 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0195 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0195 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0192 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> quit_success_30d_order </td>\n   <td style=\"text-align:right;\"> 0.0189 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_14_item_order </td>\n   <td style=\"text-align:right;\"> -0.0186 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0184 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0182 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0181 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0180 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0180 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0178 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0161 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_20_item_order </td>\n   <td style=\"text-align:right;\"> -0.0159 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0156 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_angry_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0151 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_no_smoking_allowed </td>\n   <td style=\"text-align:right;\"> -0.0147 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0146 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_pain </td>\n   <td style=\"text-align:right;\"> -0.0143 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_stressed_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0139 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_15_item_order </td>\n   <td style=\"text-align:right;\"> -0.0135 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_14_item_order </td>\n   <td style=\"text-align:right;\"> 0.0125 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0119 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0105 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0103 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0101 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> phq9_6_item_order </td>\n   <td style=\"text-align:right;\"> -0.0097 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_no </td>\n   <td style=\"text-align:right;\"> -0.0083 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0082 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0082 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0078 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0070 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0068 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0063 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_mfi_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0061 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_1_item_order </td>\n   <td style=\"text-align:right;\"> 0.0060 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_3_item_order </td>\n   <td style=\"text-align:right;\"> 0.0058 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_crave_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0057 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0056 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0055 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0049 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_4_item_order </td>\n   <td style=\"text-align:right;\"> -0.0049 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0041 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_yes </td>\n   <td style=\"text-align:right;\"> 0.0037 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0033 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0032 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0031 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0030 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_no </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_coughing_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0026 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_marital_status_ehr_never_married </td>\n   <td style=\"text-align:right;\"> 0.0019 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_e_cig_tried </td>\n   <td style=\"text-align:right;\"> 0.0017 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0013 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0009 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_pipe_tried </td>\n   <td style=\"text-align:right;\"> -0.0007 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_ftnd_2_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0005 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hrqol_4 </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_do_not_work_outside_home </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n\n```{.r .cell-code .hidden}\n# manual model\nmodel_manual_40102 |> \n  tidy() |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 179\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nmodel_manual_40102 |> \n  tidy() |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  #select(-penalty) |> \n  arrange(desc(abs(estimate))) |> \n  print_kbl(digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> penalty </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -0.1866 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> co </td>\n   <td style=\"text-align:right;\"> -0.1840 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.1362 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.1259 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.1229 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0985 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> motive_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0961 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0876 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0856 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0828 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> longest_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0731 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_weekend_order </td>\n   <td style=\"text-align:right;\"> -0.0705 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0695 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0690 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0662 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0651 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0650 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0650 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0639 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0630 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0602 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0575 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0570 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0524 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0483 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0458 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> quit_success_30d_order </td>\n   <td style=\"text-align:right;\"> 0.0451 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0440 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0433 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_9_item_no </td>\n   <td style=\"text-align:right;\"> 0.0426 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0421 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0421 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0414 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0413 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0408 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0400 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0388 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0383 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0381 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> alc_qty_order </td>\n   <td style=\"text-align:right;\"> 0.0365 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0361 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> income_order </td>\n   <td style=\"text-align:right;\"> 0.0355 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> important_to_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0351 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0317 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0314 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0311 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_no </td>\n   <td style=\"text-align:right;\"> -0.0311 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0309 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_27_item_order </td>\n   <td style=\"text-align:right;\"> 0.0297 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0291 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0289 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0286 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0282 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_pain </td>\n   <td style=\"text-align:right;\"> -0.0282 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0277 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0276 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0276 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_4_item_order </td>\n   <td style=\"text-align:right;\"> 0.0258 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0242 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_chew_or_snuff_tried </td>\n   <td style=\"text-align:right;\"> -0.0233 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_bothered_generally_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0233 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0231 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0225 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0223 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_1_item_order </td>\n   <td style=\"text-align:right;\"> 0.0222 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0218 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0218 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> -0.0209 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0208 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_4_item_order </td>\n   <td style=\"text-align:right;\"> -0.0208 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> cigs_per_day_heaviest </td>\n   <td style=\"text-align:right;\"> -0.0206 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0203 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_hdsm_tense </td>\n   <td style=\"text-align:right;\"> -0.0198 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0196 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0196 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_29_item_order </td>\n   <td style=\"text-align:right;\"> -0.0194 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_bothered_generally_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0190 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0186 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_20_item_order </td>\n   <td style=\"text-align:right;\"> -0.0181 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0165 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0161 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_coughing_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0161 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0160 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_14_item_order </td>\n   <td style=\"text-align:right;\"> -0.0160 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0156 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0155 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_none_yes </td>\n   <td style=\"text-align:right;\"> -0.0152 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_3_item_order </td>\n   <td style=\"text-align:right;\"> 0.0150 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0150 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0144 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0141 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0140 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_berlin_9_no </td>\n   <td style=\"text-align:right;\"> -0.0135 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0133 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0130 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0129 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0129 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0122 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> confident_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0119 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0119 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_zyban_yes </td>\n   <td style=\"text-align:right;\"> 0.0118 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_income_order </td>\n   <td style=\"text-align:right;\"> -0.0115 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0115 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_14_item_order </td>\n   <td style=\"text-align:right;\"> 0.0115 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_7_item_order </td>\n   <td style=\"text-align:right;\"> 0.0112 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0109 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_tired </td>\n   <td style=\"text-align:right;\"> -0.0100 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0099 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0098 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> phq9_6_item_order </td>\n   <td style=\"text-align:right;\"> -0.0096 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dts_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0093 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0091 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0089 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0087 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0085 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0078 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0076 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_tried </td>\n   <td style=\"text-align:right;\"> -0.0075 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0066 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0066 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0062 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_no </td>\n   <td style=\"text-align:right;\"> -0.0061 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> panas_enthusiastic_item_order </td>\n   <td style=\"text-align:right;\"> -0.0061 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> bmi_ehr </td>\n   <td style=\"text-align:right;\"> 0.0060 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0057 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0057 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_partner_yes </td>\n   <td style=\"text-align:right;\"> -0.0054 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_6_order </td>\n   <td style=\"text-align:right;\"> -0.0053 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> -0.0053 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0050 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_panas_distressed_item_order </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_4_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0036 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_e_cig_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0033 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_employment_unemployed </td>\n   <td style=\"text-align:right;\"> -0.0032 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0032 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> gender_ehr_male </td>\n   <td style=\"text-align:right;\"> 0.0030 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0029 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wsws_21_item_order </td>\n   <td style=\"text-align:right;\"> -0.0028 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_order </td>\n   <td style=\"text-align:right;\"> -0.0027 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0026 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_asi3_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0026 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0025 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_8_item_order </td>\n   <td style=\"text-align:right;\"> -0.0024 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0022 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0021 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_31_item_order </td>\n   <td style=\"text-align:right;\"> 0.0018 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0017 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> age_daily_smoker </td>\n   <td style=\"text-align:right;\"> 0.0016 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_15_item_order </td>\n   <td style=\"text-align:right;\"> -0.0014 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> alc_freq_order </td>\n   <td style=\"text-align:right;\"> 0.0012 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> employment_employed_full_time </td>\n   <td style=\"text-align:right;\"> 0.0011 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_5_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0011 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_5_item_no </td>\n   <td style=\"text-align:right;\"> -0.0011 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0010 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0008 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_28_item_order </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_17_item_order </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_18_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_last_rct_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_28_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_cant_calm_down_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_27_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_20_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_mfi_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_dizziness_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_7_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_18_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_phq9_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\nTINY differences between model fit with N = 1085 with different subs held out (same number of features, same order of top features, very small differences in some parameter estimates). Both differ much more markedly from full model (~50 more features, bigger differences in parameter estimates and top features order)\n\nMake predictions for subid 50085\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# make d_out\nd_50085 <- d_trip |> \n  filter(subid == 50085)\n\n# from model fit on full dataset\nfeat_out_full <- rec_prepped_full |> \n  bake(new_data = d_50085)\n\npreds_full <- predict(model_best, feat_out_full,\n                      type = \"prob\") |> \n  mutate(tx = d_50085$treatment,\n         model = \"full\") |> \n  select(model, tx, prob_raw = `.pred_abstinent`)\n\n# from manual model n = 1085\nd_in <- d |> \n  filter(subid != 50085)\n\nrec_manual <- build_recipe(d_in, config = best_config)\n\nrec_prepped_manual <- rec_manual |> \n  prep(training = d_in, strings_as_factors = FALSE)\n\nfeat_in <- rec_prepped_manual |> \n  bake(new_data = NULL)\n\nfeat_out_manual <- rec_prepped_manual |> \n  bake(new_data = d_50085)\n\nmodel_manual_50085 <- fit_best_model(best_config, feat = feat_in, \n                               ml_mode = \"classification\")\n\npreds_manual <- predict(model_manual_50085, feat_out_manual,\n                        type = \"prob\") |> \n  mutate(tx = d_50085$treatment,\n         model = \"manual\") |> \n  select(model, tx, prob_raw = `.pred_abstinent`)\n\n# from loop n = 1085\npreds_loop <- get_triple_probs(50085, best_config, d, d_trip) |> \n  select(tx, prob_raw) |> \n  mutate(model = \"loop\")\n  \npreds_50085 <- full_join(preds_full, preds_manual, \n                         by = c(\"model\", \"tx\", \"prob_raw\")) |> \n  full_join(preds_loop, by = c(\"model\", \"tx\", \"prob_raw\"))\n\npreds_50085\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 9 × 3\n  model  tx          prob_raw\n  <chr>  <fct>          <dbl>\n1 full   patch          0.475\n2 full   combo_nrt      0.518\n3 full   varenicline    0.543\n4 manual patch          0.619\n5 manual combo_nrt      0.672\n6 manual varenicline    0.649\n7 loop   patch          0.619\n8 loop   combo_nrt      0.672\n9 loop   varenicline    0.649\n```\n\n\n:::\n:::\n\nLoop & manual model produce same predictions. Predictions made with full model are very different - these would NOT choose the same best treatment (full model chooses varenicline, manual and loop models choose combo NRT).\n\nLook at parameter estimates\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# full model\nmodel_tidy |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 128\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nmodel_tidy |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  #select(-penalty) |> \n  arrange(desc(abs(estimate))) |> \n  print_kbl(digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> penalty </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -0.7350 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> co </td>\n   <td style=\"text-align:right;\"> -0.1665 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.1228 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0960 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> motive_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0951 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0929 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0832 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0770 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> longest_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0756 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0694 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0667 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0644 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_weekend_order </td>\n   <td style=\"text-align:right;\"> -0.0610 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0607 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0601 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0599 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0585 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> income_order </td>\n   <td style=\"text-align:right;\"> 0.0576 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0516 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0429 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0428 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0422 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0418 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_5_item_order </td>\n   <td style=\"text-align:right;\"> -0.0405 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0403 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> important_to_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0394 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0369 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0358 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0355 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0341 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0319 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0318 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0310 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0310 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0306 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0297 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0287 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0286 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0284 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0276 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0273 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0269 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0247 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0241 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0237 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0235 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0230 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0227 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0220 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_tense </td>\n   <td style=\"text-align:right;\"> -0.0216 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0209 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0208 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_order </td>\n   <td style=\"text-align:right;\"> -0.0202 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0199 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0198 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0195 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0195 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0192 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> quit_success_30d_order </td>\n   <td style=\"text-align:right;\"> 0.0189 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_14_item_order </td>\n   <td style=\"text-align:right;\"> -0.0186 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0184 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0182 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0181 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0180 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0180 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0178 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0161 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_20_item_order </td>\n   <td style=\"text-align:right;\"> -0.0159 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0156 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_angry_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0151 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_no_smoking_allowed </td>\n   <td style=\"text-align:right;\"> -0.0147 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0146 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_pain </td>\n   <td style=\"text-align:right;\"> -0.0143 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_stressed_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0139 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_15_item_order </td>\n   <td style=\"text-align:right;\"> -0.0135 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_14_item_order </td>\n   <td style=\"text-align:right;\"> 0.0125 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0119 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0105 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0103 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0101 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> phq9_6_item_order </td>\n   <td style=\"text-align:right;\"> -0.0097 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_no </td>\n   <td style=\"text-align:right;\"> -0.0083 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0082 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0082 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0078 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0070 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0068 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0063 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_mfi_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0061 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_1_item_order </td>\n   <td style=\"text-align:right;\"> 0.0060 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_3_item_order </td>\n   <td style=\"text-align:right;\"> 0.0058 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_crave_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0057 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0056 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0055 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0049 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_4_item_order </td>\n   <td style=\"text-align:right;\"> -0.0049 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0041 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_yes </td>\n   <td style=\"text-align:right;\"> 0.0037 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> live_with_smoker_yes </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0033 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0032 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0031 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0030 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_nic_gum_no </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_coughing_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0026 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_marital_status_ehr_never_married </td>\n   <td style=\"text-align:right;\"> 0.0019 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_e_cig_tried </td>\n   <td style=\"text-align:right;\"> 0.0017 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0013 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0009 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_pipe_tried </td>\n   <td style=\"text-align:right;\"> -0.0007 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_ftnd_2_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0005 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0003 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hrqol_4 </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_work_ban_do_not_work_outside_home </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n\n```{.r .cell-code .hidden}\n# manual model\nmodel_manual_50085 |> \n  tidy() |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 183\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nmodel_manual_50085 |> \n  tidy() |> \n  mutate(estimate = estimate * -1) |> \n  filter(abs(estimate) > 0) |> \n  #select(-penalty) |> \n  arrange(desc(abs(estimate))) |> \n  print_kbl(digits = 4)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; \"><table class=\"table table-striped table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> term </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> estimate </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> penalty </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> (Intercept) </td>\n   <td style=\"text-align:right;\"> -0.1870 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> co </td>\n   <td style=\"text-align:right;\"> -0.1863 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.1381 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.1255 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.1230 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> -0.0987 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> motive_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0961 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> 0.0882 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0852 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0822 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> longest_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0733 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_weekend_order </td>\n   <td style=\"text-align:right;\"> -0.0710 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0709 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0698 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0660 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_live_alone_or_only_with_partner </td>\n   <td style=\"text-align:right;\"> -0.0658 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> race_ehr_black_african_american </td>\n   <td style=\"text-align:right;\"> -0.0649 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0642 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0636 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0633 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0601 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0586 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0556 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_no </td>\n   <td style=\"text-align:right;\"> -0.0542 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> 0.0465 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_13_item_order </td>\n   <td style=\"text-align:right;\"> 0.0456 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> quit_success_30d_order </td>\n   <td style=\"text-align:right;\"> 0.0441 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_9_item_no </td>\n   <td style=\"text-align:right;\"> 0.0432 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0431 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0428 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0422 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0412 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0409 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0397 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0397 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0396 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0390 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0386 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> income_order </td>\n   <td style=\"text-align:right;\"> 0.0369 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0368 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0367 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> alc_qty_order </td>\n   <td style=\"text-align:right;\"> 0.0355 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> important_to_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0338 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_no </td>\n   <td style=\"text-align:right;\"> -0.0332 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0320 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0315 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_yes </td>\n   <td style=\"text-align:right;\"> 0.0312 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> psych_depression_no </td>\n   <td style=\"text-align:right;\"> -0.0312 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_relative_yes </td>\n   <td style=\"text-align:right;\"> 0.0302 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_10_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0292 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_no </td>\n   <td style=\"text-align:right;\"> 0.0289 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_27_item_order </td>\n   <td style=\"text-align:right;\"> 0.0289 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0288 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0283 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_income_order </td>\n   <td style=\"text-align:right;\"> 0.0283 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_pain </td>\n   <td style=\"text-align:right;\"> -0.0276 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0273 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_4_item_order </td>\n   <td style=\"text-align:right;\"> 0.0257 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_never_tried </td>\n   <td style=\"text-align:right;\"> 0.0238 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0236 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_32_item_order </td>\n   <td style=\"text-align:right;\"> -0.0235 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_1_item_order </td>\n   <td style=\"text-align:right;\"> 0.0231 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_used_chew_or_snuff_tried </td>\n   <td style=\"text-align:right;\"> -0.0228 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_bothered_generally_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0227 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0223 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_life_satisfaction_order </td>\n   <td style=\"text-align:right;\"> 0.0217 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0216 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0216 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> -0.0207 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> cigs_per_day_heaviest </td>\n   <td style=\"text-align:right;\"> -0.0202 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_hdsm_tense </td>\n   <td style=\"text-align:right;\"> -0.0202 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_26_item_order </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0200 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0200 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_29_item_order </td>\n   <td style=\"text-align:right;\"> -0.0191 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_22_item_order </td>\n   <td style=\"text-align:right;\"> -0.0183 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_bothered_generally_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0181 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_20_item_order </td>\n   <td style=\"text-align:right;\"> -0.0181 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_coughing_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0173 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_26_item_order </td>\n   <td style=\"text-align:right;\"> -0.0171 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> sip2r_4_item_order </td>\n   <td style=\"text-align:right;\"> -0.0169 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_7_order </td>\n   <td style=\"text-align:right;\"> -0.0165 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_16_item_order </td>\n   <td style=\"text-align:right;\"> 0.0161 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_14_item_order </td>\n   <td style=\"text-align:right;\"> -0.0161 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_3_item_order </td>\n   <td style=\"text-align:right;\"> 0.0158 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dts_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0154 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_2_item_order </td>\n   <td style=\"text-align:right;\"> 0.0153 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0153 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0152 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0152 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0152 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_6_item_order </td>\n   <td style=\"text-align:right;\"> 0.0144 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_none_yes </td>\n   <td style=\"text-align:right;\"> -0.0139 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> spouse_smoke_no </td>\n   <td style=\"text-align:right;\"> 0.0135 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0133 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0129 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_12_item_no </td>\n   <td style=\"text-align:right;\"> 0.0128 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_tried_zyban_yes </td>\n   <td style=\"text-align:right;\"> 0.0128 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_14_item_order </td>\n   <td style=\"text-align:right;\"> 0.0124 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_berlin_9_no </td>\n   <td style=\"text-align:right;\"> -0.0124 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> confident_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0121 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0117 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_yes </td>\n   <td style=\"text-align:right;\"> -0.0116 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0114 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dts_7_item_order </td>\n   <td style=\"text-align:right;\"> 0.0114 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_3_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0112 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0101 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0101 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_27_item_order </td>\n   <td style=\"text-align:right;\"> -0.0101 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_income_order </td>\n   <td style=\"text-align:right;\"> -0.0100 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> phq9_6_item_order </td>\n   <td style=\"text-align:right;\"> -0.0096 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_friend_yes </td>\n   <td style=\"text-align:right;\"> 0.0096 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hdsm_tired </td>\n   <td style=\"text-align:right;\"> -0.0092 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0089 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> 0.0088 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_unhappy_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0086 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dts_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0085 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_want_cig_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0084 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> panas_enthusiastic_item_order </td>\n   <td style=\"text-align:right;\"> -0.0080 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_smoke_menthol_yes </td>\n   <td style=\"text-align:right;\"> -0.0072 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_3_item_no </td>\n   <td style=\"text-align:right;\"> -0.0069 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_asi3_5_item_order </td>\n   <td style=\"text-align:right;\"> 0.0068 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wisdm37_19_item_order </td>\n   <td style=\"text-align:right;\"> -0.0063 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wsws_21_item_order </td>\n   <td style=\"text-align:right;\"> -0.0062 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_13_item_order </td>\n   <td style=\"text-align:right;\"> -0.0060 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> bmi_ehr </td>\n   <td style=\"text-align:right;\"> 0.0060 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dsm5_8_item_no </td>\n   <td style=\"text-align:right;\"> 0.0053 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_chew_or_snuff_tried </td>\n   <td style=\"text-align:right;\"> -0.0053 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_mfi_15_item_order </td>\n   <td style=\"text-align:right;\"> 0.0052 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_close_smoke_partner_yes </td>\n   <td style=\"text-align:right;\"> -0.0048 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> time_around_smokers_order </td>\n   <td style=\"text-align:right;\"> -0.0045 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_tot_quit_attempt </td>\n   <td style=\"text-align:right;\"> 0.0045 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_panas_distressed_item_order </td>\n   <td style=\"text-align:right;\"> -0.0043 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_close_smoke_co_worker_yes </td>\n   <td style=\"text-align:right;\"> 0.0041 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_race_ehr_white </td>\n   <td style=\"text-align:right;\"> 0.0041 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> berlin_6_order </td>\n   <td style=\"text-align:right;\"> -0.0039 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> gender_ehr_male </td>\n   <td style=\"text-align:right;\"> 0.0039 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0039 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_dsm5_8_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0037 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_6_item_no </td>\n   <td style=\"text-align:right;\"> -0.0036 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_dsm5_4_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0031 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> asi3_3_item_order </td>\n   <td style=\"text-align:right;\"> -0.0029 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> shp_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0027 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_18_item_order </td>\n   <td style=\"text-align:right;\"> -0.0027 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_ftnd_6_item_yes </td>\n   <td style=\"text-align:right;\"> -0.0024 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0024 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wsws_8_item_order </td>\n   <td style=\"text-align:right;\"> -0.0023 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_employment_unemployed </td>\n   <td style=\"text-align:right;\"> -0.0023 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_live_with_smoker_no </td>\n   <td style=\"text-align:right;\"> 0.0021 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> alc_freq_order </td>\n   <td style=\"text-align:right;\"> 0.0016 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_constipation_24h_item_order </td>\n   <td style=\"text-align:right;\"> 0.0016 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_5_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0015 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> ftnd_5_item_no </td>\n   <td style=\"text-align:right;\"> -0.0015 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_31_item_order </td>\n   <td style=\"text-align:right;\"> 0.0013 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_15_item_order </td>\n   <td style=\"text-align:right;\"> -0.0012 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_12_item_order </td>\n   <td style=\"text-align:right;\"> -0.0011 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_28_item_order </td>\n   <td style=\"text-align:right;\"> 0.0011 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_mfi_9_item_order </td>\n   <td style=\"text-align:right;\"> -0.0008 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_used_cigars_tried </td>\n   <td style=\"text-align:right;\"> -0.0008 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_gender_ehr_female </td>\n   <td style=\"text-align:right;\"> -0.0007 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_divorced </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_no </td>\n   <td style=\"text-align:right;\"> -0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> dsm5_7_item_yes </td>\n   <td style=\"text-align:right;\"> 0.0006 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> used_e_cig_never_tried </td>\n   <td style=\"text-align:right;\"> -0.0005 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> wisdm37_28_item_order </td>\n   <td style=\"text-align:right;\"> 0.0005 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_last_rct_quit_order </td>\n   <td style=\"text-align:right;\"> 0.0002 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_20_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_wsws_cant_calm_down_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_17_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_27_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> age_daily_smoker </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_wisdm37_7_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_combo_nrt_x_asi3_2_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> marital_status_ehr_married </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_spouse_smoke_dont_live_with_spouse_or_partner </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_patch_x_phq9_9_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_asi3_18_item_order </td>\n   <td style=\"text-align:right;\"> 0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wsws_dizziness_24h_item_order </td>\n   <td style=\"text-align:right;\"> -0.0001 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> hrqol_4 </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> mfi_18_item_order </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> close_smoke_none_yes </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> close_smoke_none_no </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> treatment_varenicline_x_wisdm37_30_item_order </td>\n   <td style=\"text-align:right;\"> 0.0000 </td>\n   <td style=\"text-align:right;\"> 0.1326 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\nA few more features than the two other N = 1085 models (though even further away from number of features in full model). Same order of top features, very similar values.\n\n### Make AIM 2 Dataset\n\nPivot probabilities into wide format & select only raw probability (based on calibration validity check below)\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nraw_probs_wide <- all_probs |> \n  select(subid, tx, prob_raw) |> \n  pivot_wider(names_prefix = \"prob_\",\n              names_from = tx,\n              values_from = prob_raw)\n\nglimpse(raw_probs_wide)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\nRows: 1,086\nColumns: 4\n$ subid            <dbl> 20010, 20015, 20030, 20049, 20051, 20072, 20077, 2008…\n$ prob_patch       <dbl> 0.3623282, 0.5838388, 0.3770966, 0.5377679, 0.4731365…\n$ prob_combo_nrt   <dbl> 0.3074446, 0.6021400, 0.4396889, 0.5035007, 0.5689455…\n$ prob_varenicline <dbl> 0.4606941, 0.6425940, 0.4593556, 0.5268828, 0.5762493…\n```\n\n\n:::\n:::\n\n\nJoin with d & create new variables\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nd_aim_2 <- d |> \n  select(subid, tx_rct = treatment, outcome_rct_wk4 = y) |> \n  left_join(raw_probs_wide, by = \"subid\") |> \n  mutate(tx_best = case_when(\n    prob_patch > prob_combo_nrt & prob_patch > prob_varenicline ~ \"patch\",\n    prob_combo_nrt > prob_patch & prob_combo_nrt > prob_varenicline ~ \"combo_nrt\",\n    prob_varenicline > prob_patch & prob_varenicline > prob_combo_nrt ~ \"varenicline\",\n    TRUE ~ NA_character_\n  )) |> \n  mutate(prob_best = case_when(\n    tx_best == \"patch\" ~ prob_patch,\n    tx_best == \"combo_nrt\" ~ prob_combo_nrt,\n    tx_best == \"varenicline\" ~ prob_varenicline,\n    TRUE ~ NA_real_\n  )) |> \n  mutate(tx_best = factor(tx_best, \n                          levels = c(\n                            \"patch\",\n                            \"varenicline\",\n                            \"combo_nrt\"))) |> \n  mutate(tx_match = if_else(tx_best == tx_rct, TRUE, FALSE)) |> \n  left_join(d_outcomes, by = \"subid\") |> \n  select(-pp_hybrid_wk4_outcome, -pp_hybrid_wk1_outcome, \n         -pp_hybrid_yr3_outcome, -pp_hybrid_wk52_outcome) |> \n  rename(outcome_rct_wk12 = pp_hybrid_wk12_outcome,\n         outcome_rct_wk26 = pp_hybrid_wk26_outcome) |> \n  relocate(subid, tx_rct, tx_best, tx_match,\n           prob_best, starts_with(\"outcome\"), starts_with(\"prob\"))\n\nglimpse(d_aim_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\nRows: 1,086\nColumns: 11\n$ subid            <dbl> 20010, 20015, 20030, 20049, 20051, 20072, 20077, 2008…\n$ tx_rct           <fct> patch, combo_nrt, patch, varenicline, patch, combo_nr…\n$ tx_best          <fct> varenicline, varenicline, varenicline, patch, varenic…\n$ tx_match         <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE,…\n$ prob_best        <dbl> 0.4606941, 0.6425940, 0.4593556, 0.5377679, 0.5762493…\n$ outcome_rct_wk4  <fct> smoking, smoking, smoking, smoking, smoking, smoking,…\n$ outcome_rct_wk12 <chr> \"smoking\", \"smoking\", \"smoking\", \"abstinent\", \"smokin…\n$ outcome_rct_wk26 <chr> \"smoking\", \"smoking\", \"smoking\", \"abstinent\", \"smokin…\n$ prob_patch       <dbl> 0.3623282, 0.5838388, 0.3770966, 0.5377679, 0.4731365…\n$ prob_combo_nrt   <dbl> 0.3074446, 0.6021400, 0.4396889, 0.5035007, 0.5689455…\n$ prob_varenicline <dbl> 0.4606941, 0.6425940, 0.4593556, 0.5268828, 0.5762493…\n```\n\n\n:::\n:::\n\n\nQuick EDA checks\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# confirm logic worked as expected\nhead(d_aim_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 6 × 11\n  subid tx_rct      tx_best     tx_match prob_best outcome_rct_wk4\n  <dbl> <fct>       <fct>       <lgl>        <dbl> <fct>          \n1 20010 patch       varenicline FALSE        0.461 smoking        \n2 20015 combo_nrt   varenicline FALSE        0.643 smoking        \n3 20030 patch       varenicline FALSE        0.459 smoking        \n4 20049 varenicline patch       FALSE        0.538 smoking        \n5 20051 patch       varenicline FALSE        0.576 smoking        \n6 20072 combo_nrt   combo_nrt   TRUE         0.522 smoking        \n  outcome_rct_wk12 outcome_rct_wk26 prob_patch prob_combo_nrt prob_varenicline\n  <chr>            <chr>                 <dbl>          <dbl>            <dbl>\n1 smoking          smoking               0.362          0.307            0.461\n2 smoking          smoking               0.584          0.602            0.643\n3 smoking          smoking               0.377          0.440            0.459\n4 abstinent        abstinent             0.538          0.504            0.527\n5 smoking          smoking               0.473          0.569            0.576\n6 smoking          smoking               0.506          0.522            0.470\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# check on variability of best tx\nd_aim_2 |> \n  tab(tx_best)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 3 × 3\n  tx_best         n  prop\n  <fct>       <int> <dbl>\n1 patch         315 0.290\n2 varenicline   526 0.484\n3 combo_nrt     245 0.226\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# check on variability of tx matching\nd_aim_2 |> \n  tab(tx_match)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 2 × 3\n  tx_match     n  prop\n  <lgl>    <int> <dbl>\n1 FALSE      693 0.638\n2 TRUE       393 0.362\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# variability of matching within assigned (RCT) tx\nd_aim_2 |> \n  group_by(tx_rct) |> \n  tab(tx_match)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 6 × 4\n# Groups:   tx_rct [3]\n  tx_rct      tx_match     n  prop\n  <fct>       <lgl>    <int> <dbl>\n1 patch       FALSE      166 0.689\n2 patch       TRUE        75 0.311\n3 varenicline FALSE      212 0.5  \n4 varenicline TRUE       212 0.5  \n5 combo_nrt   FALSE      315 0.748\n6 combo_nrt   TRUE       106 0.252\n```\n\n\n:::\n:::\n\n\nWrite out\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nd_aim_2 |> \n  write_csv(file.path(path_models, str_c(\"aim_2_\", version, \"_\", \n                                         y_col_name, \".csv\")))\n```\n:::\n\n\n### Validity check: Model Calibration\n\nMake wide format for all calibrated probabilities\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nall_probs_wide <- all_probs |> \n  rename_with(~ str_replace(.x, \"prob_\", \"\"), .cols = starts_with(\"prob_\")) |> \n  pivot_wider(\n    names_from = tx,\n    values_from = c(raw, beta, iso, logi),\n    names_glue = \"{.value}_{tx}\"\n  )\n```\n:::\n\n\nSet up validity check data\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nd_valid <- d_aim_2 |> \n  select(subid, tx_rct, outcome_rct_wk4) |> \n  left_join(all_probs_wide, by = \"subid\") |> \n  mutate(beta = case_when(\n    tx_rct == \"patch\" ~ beta_patch,\n    tx_rct == \"combo_nrt\" ~ beta_combo_nrt,\n    tx_rct == \"varenicline\" ~ beta_varenicline,\n    TRUE ~ NA_real_\n  ),\n  raw = case_when(\n    tx_rct == \"patch\" ~ raw_patch,\n    tx_rct == \"combo_nrt\" ~ raw_combo_nrt,\n    tx_rct == \"varenicline\" ~ raw_varenicline,\n    TRUE ~ NA_real_\n  ),\n  isotonic = case_when(\n    tx_rct == \"patch\" ~ iso_patch,\n    tx_rct == \"combo_nrt\" ~ iso_combo_nrt,\n    tx_rct == \"varenicline\" ~ iso_varenicline,\n    TRUE ~ NA_real_\n  ),\n  logistic = case_when(\n    tx_rct == \"patch\" ~ logi_patch,\n    tx_rct == \"combo_nrt\" ~ logi_combo_nrt,\n    tx_rct == \"varenicline\" ~ logi_varenicline,\n    TRUE ~ NA_real_\n  )) |> \n  select(subid, outcome_rct_wk4, beta, raw, isotonic, logistic) \n```\n:::\n\n\n#### Comparison of means\n\nCompare mean abstinence from RCT to predicted probabilities for RCT tx across calibrations\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nd_valid |> \n  mutate(outcome_rct = if_else(outcome_rct_wk4 == \"abstinent\", 1, 0)) |> \n  summarize(mean_rct = mean(outcome_rct),\n            mean_beta = mean(beta),\n            mean_iso = mean(isotonic),\n            mean_logi = mean(logistic),\n            mean_raw = mean(raw))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n# A tibble: 1 × 5\n  mean_rct mean_beta mean_iso mean_logi mean_raw\n     <dbl>     <dbl>    <dbl>     <dbl>    <dbl>\n1    0.342     0.361    0.270     0.365    0.462\n```\n\n\n:::\n:::\n\nBeta and logistic calibrated probabilities appear to match the outcome best.\n\n#### Plots\n\nPivot data longer for required format\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nd_plot <- d_valid |> \n  pivot_longer(\n    cols = c(beta, raw, isotonic, logistic),\n    names_to = \"method\",\n    values_to = \".pred_abstinent\"\n  )\n```\n:::\n\n\nMake plots by calibration method\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nd_plot |> \n  cal_plot_breaks(truth = outcome_rct_wk4, \n                  estimate = .pred_abstinent,\n                  .by = method)\n```\n\n::: {.cell-output-display}\n![](fit_final_model_4wk_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n\n```{.r .cell-code .hidden}\nd_plot |> \n  cal_plot_windowed(truth = outcome_rct_wk4, \n                    estimate = .pred_abstinent,\n                    .by = method)\n```\n\n::: {.cell-output-display}\n![](fit_final_model_4wk_files/figure-html/unnamed-chunk-21-2.png){width=672}\n:::\n:::\n\nRaw probabilities appear the most well-calibrated: best aligned with diagonal line, spans the fullest range of bins/windows. Will use raw probabilities for AIM 2 analyses (selected above).\n\n#### Brier score\n\nBeta calibration\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbrier_class_vec(truth = d_valid$outcome_rct_wk4,\n                estimate = d_valid$beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 0.2114336\n```\n\n\n:::\n:::\n\n\nLogistic calibration\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbrier_class_vec(truth = d_valid$outcome_rct_wk4,\n                estimate = d_valid$logistic)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 0.2127456\n```\n\n\n:::\n:::\n\n\nIsotonic calibration\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbrier_class_vec(truth = d_valid$outcome_rct_wk4,\n                estimate = d_valid$isotonic)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 0.228964\n```\n\n\n:::\n:::\n\n\nRaw calibration\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nbrier_class_vec(truth = d_valid$outcome_rct_wk4,\n                estimate = d_valid$raw)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 500px;\"}\n[1] 0.2159791\n```\n\n\n:::\n:::\n\n\nBeta calibration has the lowest Brier score index, followed closely by logistic calibration.\n\n",
    "supporting": [
      "fit_final_model_4wk_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}